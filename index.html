<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Price of Living: A Visual Journey Through Inflation</title>
    <link rel="stylesheet" href="css/styles.css">

    <!--
        D3.js v7 - Data-Driven Documents
        Purpose: JavaScript library for creating interactive data visualizations in the browser
        Global object: d3
        Methods used: d3.csv(), d3.select(), d3.scaleLinear(), d3.line(), d3.axisBottom(),
                     d3.geoMercator(), d3.geoPath(), d3.scaleSequential(), d3.schemeTableau10
        Source: https://d3js.org/
    -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!--
        TopoJSON v3 - Topology encoding library
        Purpose: Extension of GeoJSON for encoding topology, used for efficient map geometries
        Global object: topojson
        Methods used: topojson.feature()
        Source: https://github.com/topojson/topojson
    -->
    <script src="https://unpkg.com/topojson@3"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="nav-title">The Price of Living</h1>
            <ul class="nav-menu">
                <li><a href="#introduction">Introdução</a></li>
                <li><a href="#data">Dados</a></li>
                <li><a href="#visualizations">Visualizações</a></li>
                <li><a href="#conclusions">Conclusões</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero">
        <div class="hero-content">
            <h1>The Price of Living</h1>
            <p>Uma Jornada Visual Através da Inflação em Portugal</p>
        </div>
    </header>

    <!-- Introduction Section -->
    <section id="introduction" class="section">
        <div class="container">
            <h2>Introdução</h2>
            <p>
                A inflação voltou a estar no centro do debate público nos últimos anos, 
                com impacto direto no custo de vida das famílias portuguesas. O aumento 
                dos preços da energia, da alimentação e da habitação tem sido sentido por 
                todos, mas afeta de forma particular os grupos mais vulneráveis.
            </p>
            <p>
                O nosso objetivo é analisar de que forma a inflação em Portugal afeta 
                diferentes dimensões do dia a dia: preços, salários, habitação e desigualdade social.
            </p>
            
            <div class="questions-box">
                <h3>Questões Principais</h3>
                <ul>
                    <li>Quanto aumentou a inflação em Portugal no total e em cada categoria de bens e serviços?</li>
                    <li>Os salários acompanharam a subida de preços ou houve perda de poder de compra?</li>
                    <li>Como Portugal se compara com a União Europeia?</li>
                    <li>A inflação afetou a distribuição do rendimento e os 40% mais pobres?</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Data Section -->
    <section id="data" class="section section-alt">
        <div class="container">
            <h2>Dados</h2>
            <p>
                Para a nossa análise recorremos a dados da <strong>Pordata</strong>, 
                que compila estatísticas oficiais do INE e do Eurostat.
            </p>
            
            <div class="data-sources">
                <div class="data-card">
                    <h3>Índice de Preços no Consumidor (IPC)</h3>
                    <p>Mostra como os preços evoluem em diferentes categorias, como alimentação ou transportes.</p>
                </div>

                <div class="data-card">
                    <h3>Salário Mínimo Nacional</h3>
                    <p>Permite avaliar se os rendimentos acompanharam a subida dos preços.</p>
                </div>

                <div class="data-card">
                    <h3>Índice Harmonizado de Preços (HICP)</h3>
                    <p>Garante comparabilidade com a média da União Europeia.</p>
                </div>

                <div class="data-card">
                    <h3>Quota de Rendimento dos 40% Mais Pobres</h3>
                    <p>Mostra como é distribuído o rendimento em Portugal.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Visualizations Section -->
    <section id="visualizations" class="section">
        <div class="container">
            <h2>Visualizações</h2>
            <p>Explore os dados de forma interativa através das visualizações abaixo.</p>
            
            <!-- Visualization 1: Inflation by Category -->
            <div class="visualization-container">
                <h3>Taxa de Inflação por Bens e Serviços</h3>
                <p class="viz-description">
                    Evolução da taxa de inflação em Portugal por diferentes categorias de bens e serviços desde 1960.
                </p>
                <p class="viz-source">
                    <strong>Fonte:</strong> <a href="https://www.pordata.pt/pt/estatisticas/inflacao/taxa-de-inflacao/taxa-de-inflacao-por-bens-e-servicos-portugal" target="_blank" rel="noopener noreferrer">Pordata - Taxa de Inflação por Bens e Serviços (Portugal)</a>
                </p>

                <!-- Visualization Mode Buttons -->
                <div class="viz-controls">
                    <button id="btn-timeline-view" class="viz-button active">Ao longo dos anos</button>
                    <button id="btn-radar-view" class="viz-button">Por categoria</button>
                </div>

                <!-- Category filter for line chart -->
                <div id="category-filter-container" class="category-filter-section" style="display: block;"></div>

                <!-- Year selection for radar chart -->
                <div id="year-selection-container" class="year-selection" style="display: none;">
                    <h4>Selecione os anos para comparar:</h4>
                    <div id="year-checkboxes" class="year-checkboxes"></div>
                </div>

                <div id="viz-inflation-categories" class="viz-canvas"></div>
            </div>

            <!-- Visualization 2: Bullet Graph - Wage Analysis -->
            <div class="visualization-container">
                <h3>Análise do Poder de Compra do Salário Mínimo</h3>
                <p class="viz-description">
                    Comparação entre o salário mínimo nominal e o salário real (ajustado pela inflação) face ao ano base de 2012.
                </p>
                <p class="viz-source">
                    <strong>Fontes:</strong> <a href="https://www.pordata.pt/pt/estatisticas/salarios-e-pensoes/salarios/salario-minimo-nacional" target="_blank" rel="noopener noreferrer">Pordata - Salário Mínimo Nacional</a> | <a href="https://www.pordata.pt/pt/estatisticas/inflacao/taxa-de-inflacao/taxa-de-inflacao-por-bens-e-servicos-portugal" target="_blank" rel="noopener noreferrer">Taxa de Inflação</a>
                </p>

                <!-- Year selector for bullet graph -->
                <div class="bullet-controls">
                    <label for="year-select">Selecione o ano:</label>
                    <div id="bullet-year-selector"></div>
                </div>

                <div id="viz-bullet-graph" class="viz-canvas"></div>
            </div>

            <!-- Visualization 3: Choropleth Map - Europe HICP -->
            <div class="visualization-container">
                <h3>Índice Harmonizado de Preços no Consumidor (HICP) - Europa</h3>
                <p class="viz-description">
                    Comparação da inflação entre países europeus. Passe o rato sobre cada país para ver os detalhes.
                </p>
                <p class="viz-source">
                    <strong>Fonte:</strong> <a href="https://www.pordata.pt/pt/estatisticas/inflacao/taxa-de-inflacao/taxa-de-inflacao-por-bens-e-servicos-portugal-na-europa" target="_blank" rel="noopener noreferrer">Pordata - Taxa de Inflação por Bens e Serviços (Portugal na Europa)</a>
                </p>

                <!-- Map controls -->
                <div class="map-controls">
                    <div class="map-control-group">
                        <label for="map-year-select">Ano:</label>
                        <select id="map-year-select" class="map-select"></select>
                    </div>
                    <div class="map-control-group">
                        <label for="map-category-select">Categoria:</label>
                        <select id="map-category-select" class="map-select"></select>
                    </div>
                </div>

                <div id="viz-choropleth-map" class="viz-canvas"></div>
            </div>

            <!-- Visualization 4: Scatter Plot - Income vs Inflation -->
            <div class="visualization-container">
                <h3>Inflação e Rendimento dos 40% Mais Pobres</h3>
                <p class="viz-description">
                    Análise da relação entre a inflação e a distribuição de rendimento em Portugal (2000-2024).
                </p>
                <p class="viz-source">
                    <strong>Fontes:</strong> <a href="https://www.pordata.pt/pt/estatisticas/pobreza/desigualdade-na-distribuicao-dos-rendimentos/rendimento-dos-40-mais-pobres-da" target="_blank" rel="noopener noreferrer">Pordata - Rendimento dos 40% Mais Pobres</a> | <a href="https://www.pordata.pt/pt/estatisticas/inflacao/taxa-de-inflacao/taxa-de-inflacao-por-bens-e-servicos-portugal" target="_blank" rel="noopener noreferrer">Taxa de Inflação</a>
                </p>

                <!-- Scatter view buttons -->
                <div class="viz-controls">
                    <button id="btn-scatter-variation" class="viz-button active">Poder de Compra</button>
                    <button id="btn-scatter-timeline" class="viz-button">Evolução Temporal</button>
                </div>

                <!-- Dynamic descriptions for each view -->
                <div id="scatter-description" class="viz-interpretation">
                    <p id="scatter-variation-desc" style="display: block;">
                        <strong>Análise do Poder de Compra:</strong> Este gráfico relaciona a variação anual da quota
                        de rendimento dos 40% mais pobres (eixo Y) com a variação da inflação (eixo X). Cada ponto
                        representa um ano. As cores indicam cenários distintos: <span style="color: #27ae60;">●</span>
                        verde = melhor cenário (rendimento sobe, inflação desce); <span style="color: #e74c3c;">●</span>
                        vermelho = pior cenário (rendimento desce, inflação sobe); <span style="color: #f39c12;">●</span>
                        laranja = cenário misto positivo; <span style="color: #3498db;">●</span> azul = cenário misto.
                        Pontos no quadrante superior esquerdo indicam ganhos de poder de compra, enquanto no quadrante
                        inferior direito indicam perdas significativas. Anos de choques inflacionários (2022-2023) aparecem
                        claramente à direita do gráfico.
                    </p>
                    <p id="scatter-timeline-desc" style="display: none;">
                        <strong>Evolução Temporal do Poder de Compra:</strong> Este gráfico mostra a trajetória do
                        índice de poder de compra ao longo do tempo (2001-2024). O índice é calculado como a diferença
                        entre a variação do rendimento e a variação da inflação. Valores <strong>positivos</strong>
                        (acima da linha zero, pontos verdes) indicam anos em que o rendimento dos 40% mais pobres cresceu
                        mais que a inflação, representando <strong>ganhos de poder de compra</strong>. Valores
                        <strong>negativos</strong> (abaixo da linha zero, pontos vermelhos) indicam <strong>perdas</strong>.
                        A área colorida facilita a visualização dos períodos de melhoria (verde) versus deterioração
                        (vermelho) do poder de compra. Identifique facilmente os anos críticos onde a inflação superou
                        os ganhos de rendimento.
                    </p>
                </div>

                <div id="viz-scatter-plot" class="viz-canvas"></div>
            </div>
        </div>
    </section>

    <!-- Conclusions Section -->
    <section id="conclusions" class="section section-alt">
        <div class="container">
            <h2>Conclusões</h2>
            <p>
                A inflação não é apenas um indicador económico abstrato, mas um fenómeno 
                que influencia salários, rendas e desigualdades sociais em Portugal.
            </p>
            
            <div class="key-findings">
                <h3>Principais Descobertas</h3>
                <ul>
                    <li>A inflação afetou de forma desigual diferentes categorias de bens e serviços</li>
                    <li>O poder de compra das famílias foi impactado pela evolução dos salários</li>
                    <li>Comparativamente à UE, Portugal apresenta características específicas</li>
                    <li>O impacto social da inflação é visível na distribuição de rendimento</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>
                Desenvolvido por <strong>Ângela Ribeiro</strong> (109061) e 
                <strong>Hugo Castro</strong> (113889)
            </p>
            <p>
                Universidade de Aveiro - DETI<br>
                Information Visualisation 2025/2026
            </p>
        </div>
    </footer>

    <!-- JavaScript (ES6 Modules) -->
    <script type="module" src="src/main.js"></script>
</body>
</html>
